\doxysection{sensor\+\_\+inputs.\+h}
\hypertarget{sensor__inputs_8h_source}{}\label{sensor__inputs_8h_source}\index{C:/Users/Franc/OneDrive/Documents/Github/UWAM\_ACC/ACC\_Firmware/App/Inc/Drivers/sensor\_inputs.h@{C:/Users/Franc/OneDrive/Documents/Github/UWAM\_ACC/ACC\_Firmware/App/Inc/Drivers/sensor\_inputs.h}}
\mbox{\hyperlink{sensor__inputs_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{*\ sensor\_inputs.h}}
\DoxyCodeLine{00003\ \textcolor{comment}{*}}
\DoxyCodeLine{00004\ \textcolor{comment}{*\ Created\ on:\ Nov\ 1,\ 2025}}
\DoxyCodeLine{00005\ \textcolor{comment}{*\ Author:\ Franc}}
\DoxyCodeLine{00006\ \textcolor{comment}{*}}
\DoxyCodeLine{00007\ \textcolor{comment}{*/}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#ifndef\ INC\_SENSOR\_INPUTS\_H\_}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#define\ INC\_SENSOR\_INPUTS\_H\_}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00016\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}main.h"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <limits.h>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{can__driver_8h}{Drivers/can\_driver.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{acc__config_8h}{Other/acc\_config.h}}"{}}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{comment}{//\ pc8\ adc\ no\ worky\ >:(}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ ADC\_CH\_COUNT\ \ \ \ \ \ \ \ \ \ \ \ 8}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#define\ ADC\_RESOLUTION\ \ \ \ \ \ \ \ \ \ 4095}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#define\ PWM\_RESOLUTION\ \ \ \ \ \ \ \ \ \ 255}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#define\ TEMP\_ACC1\_IN0\ \ \ \ \ \ \ \ \ \ \ 0}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#define\ TEMP\_ACC2\_IN1\ \ \ \ \ \ \ \ \ \ \ 1}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#define\ TEMP\_DUCT1\_IN2\ \ \ \ \ \ \ \ \ \ 2}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#define\ TEMP\_DUCT2\_IN3\ \ \ \ \ \ \ \ \ \ 3}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#define\ PRES\_ACC1\_IN7\ \ \ \ \ \ \ \ \ \ \ 4}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#define\ PRES\_ACC2\_IN8\ \ \ \ \ \ \ \ \ \ \ 5}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#define\ PRES\_DUCT1\_IN9\ \ \ \ \ \ \ \ \ \ 6}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#define\ PRES\_DUCT2\_INX\ \ \ \ \ \ \ \ \ \ 99\ \ \ \ \ \ }\textcolor{comment}{//\ placeholder\ for\ now...}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#define\ STATUS\_LED1\ \ \ \ \ \ \ \ \ \ \ \ \ GPIO\_PIN\_6}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#define\ STATUS\_LED2\ \ \ \ \ \ \ \ \ \ \ \ \ GPIO\_PIN\_7}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#define\ STATUS\_LED3\ \ \ \ \ \ \ \ \ \ \ \ \ GPIO\_PIN\_11}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#define\ STATUS\_LED4\ \ \ \ \ \ \ \ \ \ \ \ \ GPIO\_PIN\_12}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#define\ STATUS\_LED5\ \ \ \ \ \ \ \ \ \ \ \ \ GPIO\_PIN\_13}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#define\ P\_SENSOR\_VSUP1\ \ \ \ \ \ \ \ \ \ 4.5f\ \ \ \ }\textcolor{comment}{//\ V}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#define\ P\_SENSOR\_PMAX1\ \ \ \ \ \ \ \ \ \ 50.0f\ \ \ }\textcolor{comment}{//\ psi}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#define\ P\_SENSOR\_PMIN1\ \ \ \ \ \ \ \ \ \ 0.0f\ \ \ \ }\textcolor{comment}{//\ psi}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#define\ AMS\_SEGMENT\_COUNT\ \ \ \ \ \ \ 4}}
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#define\ AMS\_SEG\_TEMP\_CAN\_ID\ \ \ \ \ (uint16\_t)0x00000000}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#define\ TACH\_TIMER\_CLK\_HZ\ \ \ \ \ \ \ 16000000\ }\textcolor{comment}{//\ 16\ MHz}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00065\ \ \ \ \ ADC\_HandleTypeDef\ *\mbox{\hyperlink{struct_sensor_inputs__t_a46d4eca5aa8954cf3ef37f2938e3e80c}{adc}};}
\DoxyCodeLine{00066\ \ \ \ \ TIM\_HandleTypeDef\ *\mbox{\hyperlink{struct_sensor_inputs__t_a3a8e7939143f8d170ce9b8b3e85a194f}{tim}};}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ adc\ dma\ buffers}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{volatile}\ uint16\_t\ \mbox{\hyperlink{struct_sensor_inputs__t_ad11f28acfbd876d2614786ec295473f6}{adc\_raw}}[\mbox{\hyperlink{sensor__inputs_8h_ab30bfc2c4f68d1f49bbbc546b25b5d96}{ADC\_CH\_COUNT}}];}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{volatile}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_sensor_inputs__t_a90096ef04ae1f7ba85eb6d43a4783c9c}{adc\_V}}[\mbox{\hyperlink{sensor__inputs_8h_ab30bfc2c4f68d1f49bbbc546b25b5d96}{ADC\_CH\_COUNT}}];}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ data\ buffers\ for\ temperature\ and\ pressure\ values}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_sensor_inputs__t_a053c7cb19bbc883d55c37e64e1b16474}{temp\_c}}[4];}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_sensor_inputs__t_aaf8150380e06278d079f61e12d2ecd4e}{pressure\_psi}}[4];\ \textcolor{comment}{//\ (what\ unit??)}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_sensor_inputs__t_a0987d69f7317662dbc0947f1eca95325}{seg\_temp\_c}}[\mbox{\hyperlink{sensor__inputs_8h_a616e7aa2061d8c22c59662eeefe420cb}{AMS\_SEGMENT\_COUNT}}];}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ pwm}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_sensor_inputs__t_a2ab665db023872af8fd0cd61022ddb72}{ch1\_duty\_cycle}};}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_sensor_inputs__t_a0eef85409db221757eecd6801ad02308}{ch2\_duty\_cycle}};}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_sensor_inputs__t_af57ff09740a3f98096378cbe22390773}{ch3\_duty\_cycle}};}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_sensor_inputs__t_adb73e2ce0ccdb613f9aac9064ba96d1f}{fan\_rpm}};}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \}\ \mbox{\hyperlink{struct_sensor_inputs__t}{SensorInputs\_t}};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ HAL\_StatusTypeDef\ \mbox{\hyperlink{sensor__inputs_8h_a7c54d187b42311d2d180b269ca9eba0e}{Sensors\_Init}}(\mbox{\hyperlink{struct_sensor_inputs__t}{SensorInputs\_t}}\ *si,\ ADC\_HandleTypeDef\ *adc,\ TIM\_HandleTypeDef\ *tim);}
\DoxyCodeLine{00088\ HAL\_StatusTypeDef\ \mbox{\hyperlink{sensor__inputs_8h_a3ddab797f4e1eed59e1b574ee5b88f1f}{Sensors\_Start}}(\mbox{\hyperlink{struct_sensor_inputs__t}{SensorInputs\_t}}\ *si);}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{sensor__inputs_8h_a4ae8fc699c9612c77f53202143422fca}{Store\_Temperature\_Readings}}(\mbox{\hyperlink{struct_sensor_inputs__t}{SensorInputs\_t}}\ *si);}
\DoxyCodeLine{00091\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{sensor__inputs_8h_a7fddf50ee6bb74576da3b524cad11dd8}{Store\_Pressure\_Readings}}(\mbox{\hyperlink{struct_sensor_inputs__t}{SensorInputs\_t}}\ *si);}
\DoxyCodeLine{00092\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{sensor__inputs_8h_af2ef93d77fdef489d590c17236625490}{PWM\_SetAll}}(\mbox{\hyperlink{struct_sensor_inputs__t}{SensorInputs\_t}}\ *si);}
\DoxyCodeLine{00093\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{sensor__inputs_8h_ac89c08962cef06037de8533eed6fbbbe}{Update\_Fan\_Speed}}(\mbox{\hyperlink{struct_sensor_inputs__t}{SensorInputs\_t}}\ *si);}
\DoxyCodeLine{00094\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{sensor__inputs_8h_a3e3318485a102e9bbf67bc2844cee6e4}{Update\_ADC\_Buffers}}(\mbox{\hyperlink{struct_sensor_inputs__t}{SensorInputs\_t}}\ *si);}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ INC\_SENSOR\_INPUTS\_H\_\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
